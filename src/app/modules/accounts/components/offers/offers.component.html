<div class="offer pb-4">
    <app-navigator [title]="title"></app-navigator>
  
    <div class="tables-data mt-3 overflow-hidden">
      <!-- buttons -->
      <div class="flex justify-between gap-2 items-center my-3 flex-wrap">
  
        <!---------------------------------------------------------------------------->
        <div class="flex gap-2 controler">
          <button *ngIf="userG?.userPrivileges.includes(150101)"
            class="flex gap-1 btn btn-primary"
            (click)="openModal(dataModal, null, 'addOffer')">
            <span
              class="hidden md:block"
              [translate]="'name'"
              [translateParams]="{
                ar: 'Ø·Ù„Ø¨ ØªØ³Ø¹ÙŠØ± Ø¬Ø¯ÙŠØ¯ ',
                en: 'New Offer '
              }"
            ></span>
            <i class="fa-solid fa-user-plus"></i>
          </button>
          <button  *ngIf="userG?.userPrivileges.includes(150104)"
          class="flex gap-1 btn btn-danger" (click)="dataSearch.filter.showFilters = !dataSearch.filter.showFilters;">
            <span
              class="hidden md:block"
              [translate]="'name'" [translateParams]="{ar: 'Ø¨Ø­Ø« ',en: 'Search '}"></span>
            <i class="fa-solid fa-search"></i>
            </button>
          <button *ngIf="userG?.userPrivileges.includes(150105)"
            class="flex gap-1 btn btn-warning"
            (click)="exportData()"
          >
            <span
              class="hidden md:block"
              [translate]="'name'"
              [translateParams]="{
                ar: 'ØªØµØ¯ÙŠØ± Ù…Ù„Ù Ø¥ÙƒØ³Ù„',
                en: 'Export To Excel'
              }"
            ></span>
            <i class="fa-solid fa-file-export"></i>
          </button>
        </div>
      </div>
  
      <div *ngIf="dataSearch.filter.showFilters" class="flex gap-6 flex-wrap items-end mb-4">
  
        <div class="max-w-xs">
          <label class="col-form-label"> {{ "Ø£Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
    
          <ng-select
            #CustomerName
            [items]="dataSearch.filter.ListName"
            bindLabel="name"
            bindValue="id"
            [clearable]="true"
            class="w-full p-0"
            [(ngModel)]="dataSearch.filter.customerName"
            placeholder="{{ 'Chose' | translate }}"
            (change)="RefreshData()"
          >
          </ng-select>
        </div>
        <div class="max-w-xs">
          <label class="col-form-label"> {{ "Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
    
          <ng-select
            #CustomerName
            [items]="dataSearch.filter.ListPhone"
            bindLabel="name"
            bindValue="id"
            [clearable]="true"
            class="w-full p-0"
            [(ngModel)]="dataSearch.filter.mainPhoneNo"
            placeholder="{{ 'Chose' | translate }}"
            (change)="RefreshData()"
          >
          </ng-select>
        </div>
        <button
          class="btn btn-primary"
          (click)="dataSearch.filter.enable = !dataSearch.filter.enable;ClearDate();"
          [translate]="'name'"
          [translateParams]="{
            ar: 'ÙÙ„ØªØ±Ø© Ø¨Ø§Ù„ÙˆÙ‚Øª',
            en: 'Time Filter'
          }"
        ></button>
        <div class="form-group col-md-2 timeInput" *ngIf="dataSearch.filter.enable">
          <input
            placeholder="{{ 'Chose Date' | translate }}"
            [(ngModel)]="dataSearch.filter.date"
            type="text"
            (ngModelChange)="CheckDate($event)"
            class="form-control"
            [bsConfig]="{ rangeInputFormat: 'DD/MM/YYYY' }"
            bsDaterangepicker
            #dpr="bsDaterangepicker"
          />
        </div>
    
        <div class="w-fit">
          <input
            class="form-control"
            (keyup)="applyFilter($event)"
            placeholder="{{ 'search' | translate }}"
            #input
          />
        </div>
      </div>
      <!-- table -->
      <div class="overflow-auto">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
        >
          <!-- name Column -->
          <ng-container matColumnDef="branchName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span>{{'Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹'}}</span>
  
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.branchName }}
            </td>
          </ng-container>
          <ng-container matColumnDef="offerCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span>{{'Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨'}}</span>
  
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.offerCode }}
            </td>
          </ng-container>
          
        <ng-container matColumnDef="nameAr">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„'}}</span>

          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.nameAr }}
          </td>
        </ng-container>
        <ng-container matColumnDef="mainPhoneNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„'}}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.mainPhoneNo }}
          </td>
        </ng-container>
        <ng-container matColumnDef="cityName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©'}}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.cityName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="address">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†'}}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.address }}
          </td>
        </ng-container>
        <ng-container matColumnDef="paytypeName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹'}}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.paytypeName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="socialMediaName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{'Ø¹Ø±ÙØªÙ†ÙŠ Ø¹Ù† Ø·Ø±ÙŠÙ‚'}}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.socialMediaName }}
          </td>
        </ng-container>
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span>{{'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨'}}</span>
            </th>
            <td mat-cell *matCellDef="let element" >
              {{ element.date | date : " hh:mm yyyy-MM-dd" }}
  
            </td>
          </ng-container>
          <ng-container matColumnDef="addDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span>{{'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡'}}</span>
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.addDate | date : " hh:mm yyyy-MM-dd" }}
            </td>
          </ng-container>
          <!-- operations Column -->
          <ng-container matColumnDef="operations">
            <th
              mat-header-cell
              *matHeaderCellDef
              [translate]="'name'"
              [translateParams]="{
                ar: 'Ø®ÙŠØ§Ø±Ø§Øª',
                en: 'Operations'
              }"
            ></th>
            <td mat-cell *matCellDef="let element">
              <div class="flex gap-1 justify-center py-2">
                <button *ngIf="element.offerStatus!=3 && userG?.userPrivileges.includes(150102)"
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="openModal(dataModal, element, 'editOffer')">
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <!-- <button
                class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="open(uploadFileModal, element, 'uploadFile')" >
                <i class="fa fa-upload"></i>
                </button> -->
                <!-- <button 
                class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="open(ShowOfferFilesModal, element, 'ShowOfferFiles')" >
                <i class="fa-solid fa-download"></i>
                </button> -->
                <button
                class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                title="  Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±"
                data-original-title="  Ø·Ø¨Ø§Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±"
                (click)="GetDofAsaatOffersPrint(element);open(printDivOffer);"
              >
                <i class="fa-solid fa-print"></i>
              </button>
              <button *ngIf="userG?.userPrivileges.includes(150103)"
                  class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="openModal(deleteModal, element, 'delete')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </div>
            </td>
          </ng-container>
  
          <!-- Symbol Column -->
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            class="duration-300 hover:bg-slate-100"
            (dblclick)="openModal(dataModal, row, 'OfferView')"
            ></tr>
          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="14">
              {{ "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬" }} 
            </td>
          </tr>
        </table>
      </div>
      <mat-paginator [pageSizeOptions]="[10, 25, 100, dataSource.data.length]">
      </mat-paginator>
    </div>
  

    <!-- modals  -->
    <ng-template #dataModal>
        <div
        style="background-color: var(--base-color)"
        class="modal-header text-white flex justify-between items-center">
        <h4 class="m-0">
          <span class="text-2xl">{{ 'Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±' | translate }}</span>
        </h4>
        <button
          type="button"
          class="text-2xl text-white m-0"
          (click)="modal?.hide()"
        >
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    <div class="content">
        <mat-stepper linear #stepper >
            <!-- 1 -->
            <mat-step [stepControl]="FormGroup01">
            <ng-template matStepLabel>{{"Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate}}</ng-template>
            <form [formGroup]="FormGroup01">
                <div class="step-content " style="padding-bottom: 11% !important;">
                    
                <div class="row align-items-end mb-4">
                    <div class="form-group col-md-3">
                        <label class="col-form-label">
                          {{ "ÙØ±Ø¹ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}</label>
          
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [disabled]="load_BranchUserId?.length == 1"
                          [clearable]="false"
                          name="branchId"
                          placeholder=" {{ 'ÙØ±Ø¹ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±' | translate }}"
                          id="branchId"
                          name="branchId"
                          (change)="BranchChange(FormGroup01.controls['branchId'].value,'addOffer')"
                          formControlName="branchId">
                          <ng-option
                            *ngFor="let branch of load_BranchUserId"
                            [value]="branch.id"
                            >{{ branch.name }}</ng-option
                          >
                        </ng-select>
                    </div>
                       <div class="form-group col-md-3">
                        <label for="offerCode" class="col-form-label">
                          <ng-container>
                            {{ "Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          placeholder=" {{ 'Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±' | translate }}"
                          id="offerCode"
                          name="offerCode"
                          formControlName="offerCode"
                        />
                      </div>

                      <div class="form-group col-md-3">
                        <label class="col-form-label">
                          {{ "Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
          
                        <ng-select
                          style="min-width: max-content"
                          [disabled]="modalDetails.type=='OfferView'"
                          class="w-full p-0"
                          [clearable]="true"
                          placeholder=" {{ 'Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„' | translate }}"
                          id="customerId"
                          name="customerId"
                          formControlName="customerId"
                          (change)="getcustomerdata()"
          
                        >
                          <ng-option
                            *ngFor="let cus of load_Customers"
                            [value]="cus.customerId"
                            >{{ cus.nameAr }}</ng-option>
                        </ng-select>
                      </div>

                      <div class="form-group col-md-3">
                        <label for="nameAr" class="col-form-label">
                          <ng-container>
                            {{ "Client Name (Arabic)" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          [placeholder]="
                            ('Write' | translate) +
                            ' ' +
                            (('Client Name (Arabic)') | translate)
                          "
                          id="nameAr"
                          name="nameAr"
                          formControlName="nameAr"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="nameEn" class="col-form-label">
                          <ng-container>
                            {{ "Client Name (English)" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          [placeholder]="
                            ('Write' | translate) +
                            ' ' +
                            (('Client Name (English)') | translate)"
                          id="nameEn"
                          name="nameEn"
                          formControlName="nameEn"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="nationalId" class="col-form-label">
                          <ng-container>
                            {{ "NationalId" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          placeholder="{{ 'Write' | translate }} {{
                            'NationalId' | translate
                          }} "
                          id="nationalId"
                          name="nationalId"
                          formControlName="nationalId"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="mainPhoneNo" class="col-form-label">
                          <ng-container>
                            {{ "ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ	" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          placeholder="{{ 'ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ	' | translate }} "
                          id="mainPhoneNo"
                          name="mainPhoneNo"
                          formControlName="mainPhoneNo"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="subMainPhoneNo" class="col-form-label">
                          <ng-container>
                            {{ "ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„  Ø§Ù„ÙØ±Ø¹ÙŠ	" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          placeholder="{{ 'ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„  Ø§Ù„ÙØ±Ø¹ÙŠ	' | translate }} "
                          id="subMainPhoneNo"
                          name="subMainPhoneNo"
                          formControlName="subMainPhoneNo"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="email" class="col-form-label">
                          <ng-container>
                            {{ "Email" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          class="form-control"
                          placeholder=" {{ 'Email' | translate }}"
                          id="email"
                          name="email"
                          formControlName="email"
                        />
                      </div>
                      <div class="form-group col-md-3">
                        <label for="address" class="col-form-label">
                          <ng-container>
                            {{ "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" | translate }}
                          </ng-container>
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          autocomplete="off"
                          placeholder=" {{ 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' | translate }}"
                          id="address"
                          name="address"
                          formControlName="address"
                        />
                      </div>

                      <div class="form-group col-md-3">
                        <label for="cityId" class="col-form-label">{{ "Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [clearable]="true"                         
                          placeholder=" {{ 'Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„' | translate }}"
                          id="cityId"
                          name="cityId"
                          formControlName="cityId"
                        >
                        <ng-option *ngFor="let city of City_Cus" [value]="city.id">{{
                          city.name
                        }}</ng-option>
                        </ng-select>
                      </div>
                  

                      <div class="form-group col-md-3">
                        <label for="payTypeId" class="col-form-label">{{ "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹" | translate }}</label>
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [clearable]="true"
                          placeholder=" {{ 'Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹' | translate }}"
                          id="payTypeId"
                          name="payTypeId"
                          formControlName="payTypeId"
                        >
                        <ng-option *ngFor="let item of Paytype_Cus" [value]="item.id">{{
                          item.name
                        }}</ng-option>
                        </ng-select>
                      </div>

                      <div class="form-group col-md-3">
                        <label for="socialMediaId" class="col-form-label">{{ "Ø¹Ø±ÙØªÙ†Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚" | translate }}</label>
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [clearable]="true"
                          placeholder=" {{ 'Ø¹Ø±ÙØªÙ†Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚' | translate }}"
                          id="socialMediaId"
                          name="socialMediaId"
                          formControlName="socialMediaId"
                        >
                        <ng-option *ngFor="let socialMedia of SocialMedia_Cus" [value]="socialMedia.id">{{
                          socialMedia.name
                        }}</ng-option>
                        </ng-select>
                      </div>



                      <div class="form-group col-md-3" style="display: none;">
                        <label for="offerTypeId" class="col-form-label">{{ "Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨" | translate }}</label>
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [clearable]="true"
                          placeholder=" {{ 'Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨' | translate }}"
                          id="offerTypeId"
                          name="offerTypeId"
                          formControlName="offerTypeId"
                        >
                          <ng-option
                            *ngFor="let cus of load_Customers"
                            [value]="cus.customerId"
                            >{{ cus.paytypeName }}</ng-option
                          >
                        </ng-select>
                      </div>


                      <div class="form-group col-md-3">
                        <label for="offerChairperson" class="col-form-label">{{ "Ø§Ù„Ù‚Ø§Ø¦Ù… Ø¨Ø§Ù„Ø·Ù„Ø¨" | translate }}</label>
                        <ng-select
                          style="min-width: max-content"
                          class="w-full p-0"
                          [clearable]="true"
                          placeholder=" {{ 'Ø§Ù„Ù‚Ø§Ø¦Ù… Ø¨Ø§Ù„Ø·Ù„Ø¨' | translate }}"
                          id="offerChairperson"
                          name="offerChairperson"
                          formControlName="offerChairperson"
                        >
                          <ng-option
                            *ngFor="let emp of load_Employees"
                            [value]="emp.employeeId"
                            >{{ emp.nameAr }}</ng-option
                          >
                        </ng-select>
                      </div>

                      <div class="col-md-6">

                      </div>
                      

                      <div class="form-group col-md-3" style="margin-bottom: 25px;">
                        <label for="date" class="text-right col-form-label block">
                          {{ "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨" | translate }}
                        </label>
                        <input
                          placeholder="{{ 'Chose' | translate }}"
                          type="text"
                          class="form-control"
                          bsDatepicker
                          #dpr="bsDatepicker"
                          autocomplete="off"
                          [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
                          id="date"
                          name="date"
                          formControlName="date"
                        />
                      </div>
          
                      <div class="col-md-3" style="margin-top: 14px;">
                        <div class="form-group">
                          <span style="padding-right: 28%; color: #cd2a2a">{{
                            "minute" | translate
                          }}</span>
                          <span style="padding-right: 15%; color: #cd2a2a">{{
                            "hour" | translate
                          }}</span>
                          <div class="form-group timeInput">
                            <timepicker
                              style="direction: ltr"
                              autocomplete="off"
                              id="offDateTime"
                              name="offDateTime"
                              formControlName="offDateTime"
                            ></timepicker>
                          </div>
                        </div>
                      </div>

                      <div class="form-group col-span-4">
                        <label for="example-text-input" class="col-form-label">{{
                          "Notes" | translate
                        }}</label>
          
                        <textarea
                          class="form-control autosizeme"
                          style="
                            border: 1px solid #b0b1b2;
                            border-radius: 6px !important;
                            padding: 5px 6px;
                          "
                          cols="30"
                          rows="4"
                          [disabled]="modalDetails.type=='OfferView'"
                          autocomplete="off"
                          placeholder="Notes"
                          id="notes"
                          name="notes"
                          formControlName="notes"
                        ></textarea>
                      </div>

                </div>
                </div>
                <div class="d-flex justify-end w-100">
                <button mat-button matStepperNext class="bg-base text-white">
                    {{ "Next" | translate }}
                </button>
                </div>
            </form>
            </mat-step>
            <!-- 2 -->
            <mat-step [stepControl]="FormGroup02">
            <form [formGroup]="FormGroup02">
                <ng-template matStepLabel>{{
                "Financial details" | translate
                }}</ng-template>
                <div class="step-content">
                <div class="row mb-3">

                    <h3 class="flex items-center justify-start fw-bold col-md-2">
                    {{ "Ø§Ù„Ø£ØµÙ†Ø§Ù" | translate }}
                    <button
                        type="button "
                        class="add-btn mx-2"
                        (click)="addServiceOfferNew()"
                        >
                        <i class="fa fa-plus"></i>
                    </button>
                    </h3>
                    <mat-slide-toggle
                        color="primary"
                        class="col-md-1"
                        [(ngModel)]="CategoryPriceStatus"
                        [ngModelOptions]="{ standalone: true }"
                        (change)="CategoryPriceStatusChange()"
                      >
                        <span></span>
                      </mat-slide-toggle>
                    <div class="editable shadow mb-4">
                    <table
                        class="table table-responsive table-striped table-bordered text-center"
                        style="vertical-align: middle; font-size: 14px;
                         "
                    >
                        <thead
                        class="bg-base text-white"
                        style="line-height: 30px; font-size: 13px"
                        >
                        <tr>
                            <th>{{ "Ø±Ù‚Ù…" | translate }}</th>
                            <th>{{ "Ø§Ù„ØªØµÙ†ÙŠÙ" | translate }}</th>
                            <th style="width: 30% !important;">{{ "Ø§Ù„ØµÙ†Ù" | translate }}</th>
                            <th>{{ "Ø§Ù„Ø³Ø¹Ø±" | translate }}</th>
                            <th>{{ "Ø§Ù„ÙˆØ­Ø¯Ø©" | translate }}</th>
                            <th>{{ "Ø§Ù„ÙƒÙ…ÙŠØ©" | translate }}</th>
                            <th>{{ "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" | translate }}</th>
                            <th>{{ "action" | translate }}</th>
                            </tr>
                        </thead>
                        <tbody>
                        <tr
                        *ngFor="let item of OfferNewServices; let i = index"
                        style="line-height: 5px"
                        >
                        <td>{{ item.idRow }}</td>
                        <td >
                            <input
                            type="text"
                            name="os-categoryTypeName{{ item.idRow }}"
                            [(ngModel)]="item.categoryTypeName"
                            [ngModelOptions]="{standalone: true}"
                            readonly
                            />
                        </td>
                        <td (click)="open(servicesListModal_Offer, null, 'servicesList_Offer', item.idRow)">
                            <input
                            type="text"
                            name="os-nameAr{{ item.idRow  }}"
                            [(ngModel)]="item.nameAr"
                            [ngModelOptions]="{standalone: true}"
                            readonly
                            />
                        </td>
  
                        <td>
                            <div class="flex">
                            <input
                            type="number"
                            name="os-amount{{ item.idRow  }}"
                            [(ngModel)]="item.amount"
                            [ngModelOptions]="{standalone: true}"
                            [readonly]="modalDetails.type=='OfferView'"
                            (keyup)="CalculateTotal_OfferNew()"
                            />
                            <!-- <span *ngIf="item.Amounttxt" style="align-self: center;">Ø±.Ø³</span> -->
                            </div>
                        </td>
                        <td>
                          <input
                          type="text"
                          name="os-unitName{{ item.idRow  }}"
                          [(ngModel)]="item.unitName"
                          [ngModelOptions]="{standalone: true}"
                          readonly
                          />
                      </td>

                        <td>
                          <input
                          type="text"
                          name="os-qty{{ item.idRow  }}"
                          [(ngModel)]="item.qty"
                          [ngModelOptions]="{standalone: true}"
                          (keyup)="CalculateTotal_OfferNew()"
                          />
                      </td>

                        <td>
                            <div class="flex">
                            <input
                            type="number"
                            name="os-totalValue{{ item.idRow  }}"
                            [(ngModel)]="item.totalValue"
                            [ngModelOptions]="{standalone: true}"
                            readonly
                            />
                            <!-- <span *ngIf="item.TotalValuetxt" style="align-self: center;">Ø±.Ø³</span> -->
                            </div>
                        </td>
                        <td class="flex">
                            <button
                            class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                            (click)="deleteServiceOfferNew(item.idRow)"
                            >
                            <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </td>
                        </tr>
                        </tbody>
                    </table>
                    </div>
    
                  <div class="boxContainer w-80 py-3 px-3">
                  <!-- <div class="row">
                      <div class="col-md-2">
                      <label for="tax type" class=" " for="tax type">
                          {{ "tax type" | translate }}
                      </label>
                      </div>
                      <div class="col-md-10">
                      <ng-select
                          class="w-100"
                          placeholder="{{ 'Chose' | translate }}"
                          name="include_tax"
                          [(ngModel)]="modalDetailsOfferNew.taxtype"
                          [ngModelOptions]="{standalone: true}"
                          (change)="CalculateTotal_OfferNew()"
                          [clearable]="false"
                      >
                          <ng-option [value]="2">{{
                          "Excluding tax" | translate
                          }}</ng-option>
                          <ng-option [value]="3">{{
                          "Taxes included" | translate
                          }}</ng-option>
                      </ng-select>
                      </div>
                  </div>
    -->
                  <div class="row">
                      <div class="col-md-12">
                      <div class="col-md-2">
                          <label for="sumtotal" class="text-gren">{{ "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}</label>
                      </div>
                      <div class="col-md-10">
                          <input
                          id="sumtotal"
                          class="form-control text-center"
                          type="number"
                          [(ngModel)]="modalDetailsOfferNew.sumtotal"
                          [ngModelOptions]="{standalone: true}"
                          readonly
                          />
                      </div>
                      </div>
                  </div>

                  <div class="row">
                    <div class="col-md-12">
                    <div class="col-md-2">
                        <label for="discountValue" class="text-gren">{{ "Ø§Ù„Ø®ØµÙ…" | translate }}</label>
                    </div>
                    <div class="col-md-4">
                        <input
                        id="discountValue"
                        class="form-control text-center"
                        type="number"
                        [(ngModel)]="modalDetailsOfferNew.discountValue"
                        [ngModelOptions]="{standalone: true}"
                        (keyup)="CalcDisc(1);"
                        
                        />
                    </div>
                    <div class="col-md-2" style="padding-right: 6%;">
                      <label for="discountPercentage" class="text-gren">{{ "Ù†Ø³Ø¨Ø©" | translate }}</label>
                  </div>
                  <div class="col-md-4">
                      <input
                      id="discountPercentage"
                      class="form-control text-center"
                      type="number"
                      [(ngModel)]="modalDetailsOfferNew.discountPercentage"
                      [ngModelOptions]="{standalone: true}"
                      (keyup)="CalcDisc(2);"                     
                      />
                      <span style="font-size: 28px;padding-top: 5px;padding-right: 6px;">%</span>
                  </div>
                    </div>
                </div>

                  <div class="row">
                    <div class="col-md-12">
                    <div class="col-md-2">
                        <label for="sumtotalAfterDisc" class="text-gren">{{ "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…" | translate }}</label>
                    </div>
                    <div class="col-md-10">
                        <input
                        id="sumtotalAfterDisc"
                        class="form-control text-center"
                        type="number"
                        [(ngModel)]="modalDetailsOfferNew.sumtotalAfterDisc"
                        [ngModelOptions]="{standalone: true}"
                        readonly
                        />
                    </div>
                    </div>
                </div>
  
                  <!-- <div class="row">
                      <div class="col-md-12">
                      <div class="col-md-2">
                          <label for="total in writing" class="text-orange" for="total in writing">
                          {{ "total in writing" | translate }} </label>
                      </div>
                      <div class="col-md-10">
                          <input
                          id="total in writing"
                          class="form-control text-center"
                          type="text"
                          [(ngModel)]="modalDetailsOfferNew.total_amount_text"
                          [ngModelOptions]="{standalone: true}"
                          readonly
                          />
                      </div>
                      </div>
                  </div> -->
                    </div>
                </div>
    
                </div>
    
                <div class="d-flex w-100 justify-between items-center">
                <button
                    mat-button
                    matStepperPrevious
                    class="btn btn-outline-secondary"
                >
                    {{ "Previous" | translate }}
                </button>
                <!-- <button 
                    mat-button
                    matStepperNext
                    class="btn bg-base text-white"
                >
                    {{ "Next" | translate }}
                </button> -->

                <button  [disabled]="disableButtonSave_Offer"
                (click)="saveOfferbtn(modal,stepper);"
                 mat-button class="bg-base text-white">
                  {{ "save" | translate }}
                </button>
                </div>
            </form>
            </mat-step>
        </mat-stepper>
        </div>
    </ng-template>
  
    <!-- confirm delete -->
    <ng-template #deleteModal>
      <div class="modal-body text-center">
        <p
          [translate]="'name'"
          [translateParams]="{
            ar: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ',
            en: 'Are you sure to delete this row ?'
          }"
        ></p>
        <div class="flex gap-2 justify-center">
          <button
            type="button"
            mat-raised-button
            color="warn"
            (click)="confirm()"
          >
            {{ "Yes" | translate }}
          </button>
          <button
            type="button"
            (click)="decline()"
            mat-raised-button
            color="basic"
          >
            {{ "No" | translate }}
          </button>
        </div>
      </div>
    </ng-template>

  
  <!-- uploadFileModal -->
  <ng-template #uploadFileModal let-modal>
    <div class="modal-header bg-base text-white">
      <h4
        class="modal-title mb-0"
        id="modal-basic-title">{{"Ø±ÙØ¹ Ù…Ù„Ù Ø¹Ù„ÙŠ Ø·Ù„Ø¨ ØªØ³Ø¹ÙŠØ±"}}</h4>
      <button type="button" class="m-0" (click)="modal.dismiss('Cross click')">
        <i class="fa fa-close"></i>
      </button>
    </div>
    <div class="modal-body">
      <form #uploadForm="ngForm">
        <div class="row items-end uploadDiv">
          <div class="col-md-4 mb-3">
            <div class="form-input-group">
              <label
                for=""
                class="block"
                [translate]="'name'"
                [translateParams]="{ ar: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù', en: 'File name' }"
              ></label>
              <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
               [(ngModel)]="dataFile.FileName" name="file_name" autocomplete="off"/>
            </div>
          </div>
  
          <div class="upload row-span-2">
            <file-upload class="h-full" [control]="control" (click)="clickfile($event)" (focus)="focusfile($event)" (blur)="blurfile($event)">
              <ng-template
                let-isFileDragDropAvailable="isFileDragDropAvailable"
                #placeholder
              >
                <div class="px-5 flex flex-column justify-center items-center gap-2"*ngIf="control.size === 0">
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="1em"
                      viewBox="0 0 640 512"
                    >
                      <path
                        d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                      />
                    </svg>
                  </div>
  
                  <div class="upload-text">
                    {{ "Upload File" | translate }} ğŸ˜¶
                  </div>
                </div>
              </ng-template>
  
              <ng-template
                let-i="index"
                let-file="file"
                let-control="control"
                #item
              >
              <div *ngIf="file">
                <span class="delete-button" style="display: flex;" (click)="control.removeFile(file)"> <span> Ø­Ø°Ù âŒ </span>
                  <svg viewBox="0 0 448 512">
                    <path
                      d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                    ></path>
                  </svg>
                </span>
                <img class="max-h-44" *ngIf="control.valid" [src]="uploadedFile | async"/>
  
                <section class="file-info">
                  <span style="font-size: 16px;font-weight: 700;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù„Ù</span>
                  <hr/>
                  <ul>
                    <li><span style="color:red;">Name: </span>{{file.name}}</li>
                    <li><span style="color:red;">Type: </span>{{file.type}}</li>
                    <li><span style="color:red;">Size: </span>{{file.size}} bytes</li>
                  </ul>
                </section>
                <section *ngIf="!(control.size === 0)">
                  <p>ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­ØŒ ÙˆÙ„Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¹Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ø¶ØºØ· Ø²Ø± Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù âœ… </p>
                </section>
              </div>
              </ng-template>
            </file-upload>
          </div>
          <mat-progress-bar style="height: 12px;" mode="determinate" value="{{progress}}"></mat-progress-bar>
          <p style="text-align: center;color: #950101;" *ngIf="uploading"> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ... â³ </p>
          <p style="font-weight: 700;">ÙŠØ±Ø¬ÙŠ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù„Ø§ØªÙŠ Ø¹Ù†Ø¯ Ø±ÙØ¹ Ù…Ù„Ù : </p>
          <p><span style="color:red">Ø£ÙˆÙ„Ø§</span> : ØªØ£ÙƒØ¯ Ù…Ù† ÙØ­Øµ Ø§Ù„Ù…Ù„Ù Ø¨ÙˆØ§Ø³Ø·Ø© Ù…ÙƒØ§ÙØ­ Ø§Ù„ÙÙŠØ±ÙˆØ³Ø§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù†Ù‡ Ù‚Ø¨Ù„ Ø±ÙØ¹Ù‡ Ø¹Ù„ÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
        </div>
      </form>
    </div>
    <div class="modal-footer justify-content-end" style="border-top: none">
      <button
        type="button"
        class="btn btn-light py-2 px-3 mt-0"
        (click)="modal.dismiss('Cross click')"
      >
        {{ "close" | translate }}
      </button>
      <button
        [disabled]="control.size === 0 || disableButtonSave_File"
        type="button"
        class="btn submit-btn bg-base text-white py-2 px-3 mt-0"
        (click)="SaveprojectFiles('add',uploadForm.value,1)"
      >
        {{ "Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù" | translate }}
        <i class="fa fa-upload"></i>
      </button>
    </div>
  </ng-template>
  
  <!-- ShowOfferFilesModal -->
  <ng-template #ShowOfferFilesModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl"> Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª </span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <h3 style="text-align: right;color: red;font-weight: bold;text-decoration-line: underline;">Ù…Ù„ÙØ§Øª Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±</h3>
  
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "Ø£Ø³Ù… Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th>{{ "ØªØ§Ø±ÙŠØ® Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'Ø®ÙŠØ§Ø±Ø§Øª',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of OfferFilesList">
              <td>{{ type.fileName }}</td>
              <td>{{type.addDate | date : " hh:mm yyyy-MM-dd"}}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="downloadFile(type)">
                  <!-- <i class="fa fa-eye"></i> -->
                  <i class="fa-solid fa-download"></i>
                </button>
                <button *ngIf="!modalDetails.offerConvert"
                (click)="getOfferFileRow(type);open(deleteOfferFile,type,'deleteOfferFile')"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 style="text-align: right;color: red;font-weight: bold;text-decoration-line: underline;">Ù…Ù„ÙØ§Øª Ø§Ù„ØªØµÙ…ÙŠÙ…</h3>
  
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "Ø£Ø³Ù… Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th>{{ "ØªØ§Ø±ÙŠØ® Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'Ø®ÙŠØ§Ø±Ø§Øª',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of DesignFilesList">
              <td>{{ type.fileName }}</td>
              <td>{{type.addDate | date : " hh:mm yyyy-MM-dd"}}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="downloadFile(type)">
                  <!-- <i class="fa fa-eye"></i> -->
                  <i class="fa-solid fa-download"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 style="text-align: right;color: red;font-weight: bold;text-decoration-line: underline;">Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ø¬ØªÙ…Ø§Ø¹</h3>
  
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "Ø£Ø³Ù… Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th>{{ "ØªØ§Ø±ÙŠØ® Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'Ø®ÙŠØ§Ø±Ø§Øª',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of MeetingFilesList">
              <td>{{ type.fileName }}</td>
              <td>{{type.addDate | date : " hh:mm yyyy-MM-dd"}}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="downloadFile(type)">
                  <!-- <i class="fa fa-eye"></i> -->
                  <i class="fa-solid fa-download"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 style="text-align: right;color: red;font-weight: bold;text-decoration-line: underline;">Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</h3>
  
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "Ø£Ø³Ù… Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th>{{ "ØªØ§Ø±ÙŠØ® Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'Ø®ÙŠØ§Ø±Ø§Øª',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of PreviewFilesList">
              <td>{{ type.fileName }}</td>
              <td>{{type.addDate | date : " hh:mm yyyy-MM-dd"}}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="downloadFile(type)">
                  <!-- <i class="fa fa-eye"></i> -->
                  <i class="fa-solid fa-download"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button (click)="modal.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  
  <!-- deleteOfferFile -->
  <ng-template #deleteOfferFile let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirmDeleteOfferFile(); modal.dismiss()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  
  </div>
  
  
  
    <!-- servicesListModal_Offer -->
<ng-template #servicesListModal_Offer let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "Ø§Ù„Ø£ØµÙ†Ø§Ù" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body" style="overflow-y: scroll;max-height: 600px;">
      <mat-form-field class="w-full">
        <mat-label>{{ "search" | translate }}</mat-label>
        <input matInput (keyup)="applyFilterServiceList_OfferNew($event)" #input />
      </mat-form-field>

  
      <div class="table">
        <table
          mat-table
          [dataSource]="serviceListDataSource_OfferNew"
          class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <!-- Name Column -->

          <ng-container matColumnDef="categoryTypeName">
            <th mat-header-cell *matHeaderCellDef>
              {{ "Ø§Ù„ØªØµÙ†ÙŠÙ" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.categoryTypeName }}</td>
          </ng-container>

          <ng-container matColumnDef="nameAr">
            <th mat-header-cell *matHeaderCellDef>
              {{ "Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.nameAr }}</td>
          </ng-container>
  
          <!-- price Column -->
          <ng-container *ngIf="CategoryPriceStatus"  matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef>{{ "Ø§Ù„Ø³Ø¹Ø±" | translate }}</th>
            <td  mat-cell *matCellDef="let element">{{ element.amount }}</td>
          </ng-container>
          <ng-container *ngIf="!CategoryPriceStatus"  matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef>{{ "Ø§Ù„Ø³Ø¹Ø±" | translate }}</th>
            <td mat-cell *matCellDef="let element">{{ 0 }}</td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="servicesListdisplayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="
              let row;
              let i = index;
              columns: servicesListdisplayedColumns
            "
            (dblclick)="setServiceRowValue_OfferNew(row); modal.dismiss()"
          ></tr>
  
          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              {{ "noResult" | translate }} "{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>
  
      <div class="text-end mt-2">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>


<ng-template #printDivOffer let-modal>
  <div class="modal-body">

    <div id="report2Offer" [ngStyle]="{ direction: 'rtl' }">
      <div class="row main-row">
        <div class="card main-card">
            <div class="grid-container" style="background: cadetblue;">
                <div class="grid-item">
                    <h1 style="margin: 0;font-size: 22px;color:#fff;">{{BranchData?.branchNamePrint}}</h1>
                    <h4 style="margin: 0px;font-size: 14px;">Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ : {{BranchData?.customerPhone}} - {{BranchData?.customerPhone2}}</h4>
                    <h4 style="margin: 0px;font-size: 14px;">Ø§Ù„Ø´ÙƒØ§ÙˆÙŠ : {{BranchData?.complaintsNumber}}</h4>
                </div>
                <div class="grid-item text-center">
                        <img *ngIf="environmentPho"
                        src="{{environmentPhoBranch}}"
                          alt="logo"
                          style="width: 160px;height: 110px;float: left;"
                        />
                </div>
            </div>

            <div style="text-align: center;margin-bottom: 7%;">
                <img *ngIf="environmentPho"
                src="{{environmentPhoBranch}}"
                  alt="logo"
                  style="width: 800px;height: 940px;"
                />
            </div>


                <div class="row align-items-end mb-4">
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "ÙØ±Ø¹ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}</label>
                        <p>{{OfferPrintData.branchName}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}</label>
                        <p>{{OfferPrintData.offerCode}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
                        <p>{{OfferPrintData.customerName}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†" | translate }}</label>
                        <p>{{OfferPrintData.mainPhoneNo}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ† 2" | translate }}</label>
                        <p>{{OfferPrintData.subMainPhoneNo}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„" | translate }}</label>
                        <p>{{OfferPrintData.cityName}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" | translate }}</label>
                        <p>{{OfferPrintData.address}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø¹Ø±ÙØªÙ†Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚" | translate }}</label>
                        <p>{{OfferPrintData.socialMediaName}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©" | translate }}</label>
                        <p>{{OfferPrintData.nationalId}}</p>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹" | translate }}</label>
                        <p>{{OfferPrintData.paytypeName}}</p>
                    </div>

                    <div class="form-group col-md-3">
                        <label class="col-form-label">{{ "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨" | translate }}</label>
                        <p>{{ OfferPrintData.date | date : " hh:mm yyyy-MM-dd" }}</p>
                    </div>
                </div>

            <!-- <div style="height: 730px;">
            </div> -->
             <div style="height: 800px;">
            </div>

            <div class="content" style="min-width: max-content;height: 1060px;">
            <h4 *ngIf="serviceDetailsList.length>0" style="background: rgba(0, 0, 0, 0.05) !important;border-bottom: 2px solid #000000;font-weight: 600;padding: 6px;">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù: </h4>

            <table  *ngIf="serviceDetailsList.length>0"
              style="text-align: center;vertical-align: middle;width: 100%;min-width: max-content;">
              <thead>
                <tr>
                  <td
                  style=" font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                    color: #000;word-wrap: break-word;">Ø±Ù‚Ù…</td>
                <td
                  style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                    color: #000;word-wrap: break-word;">Ø§Ù„ØªØµÙ†ÙŠÙ</td>
                <td
                  style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                    color: #000;word-wrap: break-word;">Ø§Ù„ØµÙ†Ù</td>
                <td
                style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                  color: #000;word-wrap: break-word;">Ø§Ù„Ø³Ø¹Ø±</td>
                <td
                style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                  color: #000;word-wrap: break-word;">Ø§Ù„ÙˆØ­Ø¯Ø©</td>
                  <td
                  style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                    color: #000;word-wrap: break-word;">Ø§Ù„ÙƒÙ…ÙŠØ©</td>
                <td
                style="font-size: 14px;background-color: #0f9c9b;padding: 3px;text-align: center;
                  color: #000;word-wrap: break-word;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
                </tr>
              </thead>
              <tbody >
                <tr *ngFor="let item of serviceDetailsList; let i = index">
                  <td
                  style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                    border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #757879;">
                  {{item.code}}
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;">
                {{item.categoryTypeName}}
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                    border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;width: 390px;">
                <span style="font-weight: 700;">{{item.nameAr}}</span>
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                    border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;">
                {{item.amount}}
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;">
                {{item.unitName}}
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;">
                {{item.qty}}
                </td>
                <td style="background-color: #fff;font-size: 14px;padding: 3px;color: #000;
                border-inline-start: 2px dashed #0c8191;border-bottom: 2px dashed #0c8191;border-left: 2px dashed #0c8191;">
                {{item.totalValue}}
                </td>
                </tr>
              </tbody>
            </table>


              <div class="boxContainer w-80 py-3 px-3">
                  <div class="row">
                      <div class="col-md-12">
                      <div class="col-md-2">
                          <label for="sumtotal" class="text-gren">{{ "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¹ÙŠØ±" | translate }}</label>
                      </div>
                      <div class="col-md-10" style="justify-content: center;">
                        <span>
                          {{modalDetailsOfferNew_Print.sumtotal}}
                        </span>
                      </div>
                      </div>
                  </div>

                  <div class="row">
                    <div class="col-md-12">
                    <div class="col-md-2">
                        <label for="discountValue" class="text-gren">{{ "Ø§Ù„Ø®ØµÙ…" | translate }}</label>
                    </div>
                    <div class="col-md-4" style="justify-content: center;">
                        <span>
                          {{modalDetailsOfferNew_Print.discountValue}}
                        </span>
                    </div>
                    <div class="col-md-2" style="padding-right: 6%;">
                      <label for="discountPercentage" class="text-gren">{{ "Ù†Ø³Ø¨Ø©" | translate }}</label>
                  </div>
                  <div class="col-md-4" style="justify-content: center;">
                        <span>
                          {{modalDetailsOfferNew_Print.discountPercentage}}
                        </span>
                      <span style="font-size: 20px;padding-top: 0px;padding-right: 6px;">%</span>
                  </div>
                    </div>
                </div>

                  <div class="row">
                    <div class="col-md-12">
                    <div class="col-md-2">
                        <label for="sumtotalAfterDisc" class="text-gren">{{ "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…" | translate }}</label>
                    </div>
                    <div class="col-md-10" style="justify-content: center;">
                        <span>
                          {{modalDetailsOfferNew_Print.sumtotalAfterDisc}}
                        </span>
                    </div>
                    </div>
                </div>
             </div>

          </div>
        </div>
    </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      (click)="printDiv('report2Offer')"
      class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
    >
      <i class="fa fa-print"></i>
    </button>
    <button
    type="button"
    (click)="modal.dismiss()"
    mat-raised-button
    color="basic"
  >
    {{ "No" | translate }}
  </button>
  </div>
</ng-template>